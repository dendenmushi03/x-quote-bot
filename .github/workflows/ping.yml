name: ping-render-run

on:
  schedule:
    - cron: "13 */2 * * *"  # 2時間ごと
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Call /run
        run: |
          set -e
          URL="${{ secrets.RENDER_RUN_URL }}?key=${{ secrets.RUN_KEY }}"
          echo "GET $URL"
          curl -sS "$URL" | tee response.json
          echo ""
          echo "---- pretty ----"
          cat response.json | python -m json.tool || cat response.json
